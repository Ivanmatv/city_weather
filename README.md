# Weather Forecast Web Application

## Описание проекта

Это простое веб-приложение для получения прогноза погоды по названию города. Пользователь вводит название города, получает текущий прогноз с Open-Meteo, а также:

- Автодополнение при вводе названия города с помощью геокодера Nominatim.
- При повторном посещении сайта предлагается посмотреть прогноз для последнего просмотренного города.
- Сохраняется история поиска городов для каждого пользователя (идентификация по cookie).
- Реализован API для просмотра статистики — сколько раз искали каждый город.
- Вся логика реализована на FastAPI с использованием SQLite для хранения истории запросов.

---

## Использованные технологии

- **FastAPI** — современный Python-фреймворк для веб-приложений и API.
- **Jinja2** — шаблонизатор для генерации HTML.
- **geopy (Nominatim)** — сервис геокодирования для автодополнения и поиска координат.
- **Open-Meteo API** — источник данных о погоде.
- **SQLite** — легковесная база данных для хранения истории запросов.
- **Docker** — контейнеризация приложения для простого развёртывания.
- **JavaScript** — динамическое автодополнение и AJAX-запросы на фронтенде.

---

## Как запустить проект

1. **Скопировать репозиторий**

```bash
git clone https://github.com/Ivanmatv/city_weather.git
```

2. **Перейти в репозиторий**

```bash
cd city_weather
```

3. **Собрать Docker-образ**

```bash
docker build -t weather-app .
```

4. **Перейти по адресу**

```bash
http://127.0.0.1:8000
```

5. **Просмотр истории поиска городов**

```bash
http://127.0.0.1:8000/stats
```

## Запуск без Docker (опционально)

1. **Скопировать репозиторий**

```bash
git clone https://github.com/Ivanmatv/city_weather.git
```

2. **Перейти в репозиторий**

```bash
cd city_weather
```

3. **Установка и запуск виртуального окружения**

```bash
python -m venv venv
```
```bash
source venv/Scripts/activate
```

4. **Установка зависимостей**

```bash
pip install -r requirements.txt
```

5. **Запуск приложения**

```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

6. **Перейти по адресу**

```bash
http://127.0.0.1:8000
```

7. **Просмотр истории поиска городов**

```bash
http://127.0.0.1:8000/stats
```

## Запуск теста 

```bash
pytest -v test_main.py
```